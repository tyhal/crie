{
  "type": "object",
  "properties": {
    "languages": {
      "type": "object",
      "description": "a map of languages that crie should be able to run",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "match": {
            "type": [
              "null",
              "array"
            ],
            "items": {
              "type": "string"
            },
            "description": "a regex to match files against to know they are the target of this language"
          },
          "fmt": {
            "description": "used for the given language when formatting",
            "oneOf": [
              {
                "$ref": "#/$defs/LintCli"
              },
              {
                "$ref": "#/$defs/LintShfmt"
              },
              {
                "$ref": "#/$defs/LintDockFmt"
              },
              {
                "$ref": "#/$defs/LintNoop"
              }
            ]
          },
          "chk": {
            "description": "used for the given language when linting/checking",
            "oneOf": [
              {
                "$ref": "#/$defs/LintCli"
              },
              {
                "$ref": "#/$defs/LintShfmt"
              },
              {
                "$ref": "#/$defs/LintDockFmt"
              },
              {
                "$ref": "#/$defs/LintNoop"
              }
            ]
          }
        },
        "required": [
          "match"
        ],
        "additionalProperties": false
      }
    }
  },
  "$defs": {
    "LintCli": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "description": "the most common linter type, a cli tool"
        },
        "exec": {
          "type": "object",
          "properties": {
            "bin": {
              "type": "string",
              "description": "the binary or command to use"
            },
            "start": {
              "type": [
                "null",
                "array"
              ],
              "items": {
                "type": "string"
              },
              "description": "parameters that will be put in front of the file path"
            },
            "end": {
              "type": [
                "null",
                "array"
              ],
              "items": {
                "type": "string"
              },
              "description": "parameters that will be put behind the file path"
            },
            "chdir": {
              "type": "boolean",
              "description": "if true the tool will change directory to where the target file is located"
            },
            "will_write": {
              "type": "boolean",
              "description": "whether the tool will write to the file system, if unset for container execution will mount with read-only privileges"
            }
          },
          "description": "settings for the command to run",
          "required": [
            "bin"
          ],
          "additionalProperties": false
        },
        "img": {
          "type": "string",
          "description": "the container image to pull and use"
        },
        "tag_crie_version": {
          "type": "boolean",
          "description": "if an image tag should be appended with cries current version"
        }
      },
      "required": [
        "type",
        "exec"
      ],
      "additionalProperties": false
    },
    "LintDockFmt": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "description": "a built in Docker formatter thanks to reteps (Pete Stenger)"
        },
        "indent_size": {
          "type": "integer",
          "description": "Number of spaces to use for indentation",
          "minimum": 0
        },
        "trailing_newline": {
          "type": "boolean",
          "description": "End the file with a trailing newline"
        },
        "space_redirects": {
          "type": "boolean",
          "description": "Redirect operators will be followed by a space"
        }
      },
      "required": [
        "type",
        "indent_size",
        "trailing_newline",
        "space_redirects"
      ],
      "additionalProperties": false
    },
    "LintNoop": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "description": "a linter type to do nothing"
        }
      },
      "required": [
        "type"
      ],
      "additionalProperties": false
    },
    "LintShfmt": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "description": "a built in shell formatter thanks to mvdan (Daniel Mart√≠)"
        },
        "language": {
          "type": "string"
        }
      },
      "required": [
        "type",
        "language"
      ],
      "additionalProperties": false
    }
  },
  "required": [
    "languages"
  ],
  "additionalProperties": false
}
