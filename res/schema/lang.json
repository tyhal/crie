{
  "$defs": {
    "Language": {
      "additionalProperties": false,
      "properties": {
        "chk": {
          "$ref": "#/$defs/Linter",
          "description": "used for the given language when linting/checking"
        },
        "fmt": {
          "$ref": "#/$defs/Linter",
          "description": "used for the given language when formatting"
        },
        "match": {
          "$ref": "#/$defs/Regex",
          "description": "a regex to match files against to know they are the target of this language",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "array"
            }
          ]
        }
      },
      "type": "object"
    },
    "Languages": {
      "additionalProperties": false,
      "properties": {
        "languages": {
          "additionalProperties": {
            "$ref": "#/$defs/Language"
          },
          "description": "a map of languages that crie should be able to run",
          "type": "object"
        }
      },
      "required": [
        "languages"
      ],
      "type": "object"
    },
    "LintCli": {
      "additionalProperties": false,
      "properties": {
        "bin": {
          "description": "the binary or command to use",
          "type": "string"
        },
        "chdir": {
          "description": "if true the tool will change directory to where the target file is located",
          "type": "boolean"
        },
        "end": {
          "$ref": "#/$defs/Par",
          "description": "parameters that will be put behind the file path"
        },
        "img": {
          "description": "the container image to pull and use",
          "type": "string"
        },
        "start": {
          "$ref": "#/$defs/Par",
          "description": "parameters that will be put in front of the file path"
        },
        "type": {
          "description": "the most common linter type, a cli tool",
          "enum": [
            "cli"
          ],
          "type": "string"
        }
      },
      "required": [
        "type",
        "bin"
      ],
      "type": "object"
    },
    "LintNoop": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "description": "a linter type to do nothing",
          "enum": [
            "noop"
          ],
          "type": "string"
        }
      },
      "required": [
        "type"
      ],
      "type": "object"
    },
    "LintShfmt": {
      "additionalProperties": false,
      "properties": {
        "language": {
          "enum": [
            "bash",
            "posix",
            "sh",
            "mksh"
          ],
          "type": "string"
        },
        "type": {
          "description": "a built in shell formatter thanks to mvdan",
          "enum": [
            "shfmt"
          ],
          "type": "string"
        }
      },
      "required": [
        "type",
        "language"
      ],
      "type": "object"
    },
    "Linter": {
      "oneOf": [
        {
          "$ref": "#/$defs/LintCli"
        },
        {
          "$ref": "#/$defs/LintShfmt"
        },
        {
          "$ref": "#/$defs/LintNoop"
        }
      ]
    },
    "Par": {
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "Regex": {
      "additionalProperties": false,
      "properties": {},
      "type": "object"
    }
  },
  "$id": "https://github.com/tyhal/crie/cmd/crie/config/language/languages",
  "$ref": "#/$defs/Languages",
  "$schema": "https://json-schema.org/draft/2020-12/schema"
}